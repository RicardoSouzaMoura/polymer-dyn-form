<link rel="import"  href="https://polygit.org/components/polymer/polymer-element.html">
<! -- import template repeater -->
<link rel="import" href="https://polygit.org/components/polymer/lib/elements/dom-repeat.html">
<! -- import conditional template -->
<link rel="import" href="https://polygit.org/components/polymer/lib/elements/dom-if.html">



<dom-module id="dyn-form">
    <template>
        <div>
            <form action="">
                <template is="dom-repeat" items="{{metadata.fields}}">
                    <template is="dom-if" if="{item.type === 'text'}">
                        <div>
                            <label for="[[item.name]]">[[item.name]]</label>
                            <input type="text" id="[[item.name]]" name="[[item.name]]"/>
                        </div>
                    </template>
                </template>
            </form> 
       </div>
    </template>
 
    <script>
        // Define the class for a new element called custom-element
        class DynFormElement extends Polymer.Element {

            static get is() { return "dyn-form"; }
            constructor() {
                super();
                console.log('dyn-form constructor!');
            }
            static get properties(){
                console.log('dyn-form properties!');
                return {
                    metadata: {
                    type: Object
                    }
                };
            }

            ready(){
                super.ready();
                console.log('Meu metadado: '+JSON.stringify(this.metadata));
                //console.log("this.shadowRoot: "+this.shadowRoot);
                //let div = this.shadowRoot.createElement('dyn-element');
                //div.textContent = 'Meu metadado: '+this.metadata;
            }
        }
        // Register the new element with the browser
        customElements.define(DynFormElement.is, DynFormElement);
    </script>
</dom-module>